name = "atri-worker"
main = "src/index.ts"
compatibility_date = "2024-01-01"
account_id = "YOUR_ACCOUNT_ID"

[vars]
OPENAI_API_URL = "https://api.openai.com/v1"
DIARY_API_URL = "https://api.openai.com/v1"
DIARY_MODEL = "gpt-4o"
EMBEDDINGS_API_URL = "https://api.siliconflow.cn/v1"
EMBEDDINGS_MODEL = "BAAI/bge-m3"

# Tavily 联网搜索（可选）
# API Key 通过 secret 设置: npx wrangler secret put TAVILY_API_KEY
# 注册: https://tavily.com

[[vectorize]]
binding = "VECTORIZE"
index_name = "atri-memories"

[[r2_buckets]]
binding = "MEDIA_BUCKET"
bucket_name = "atri-media"
preview_bucket_name = "atri-media"

[[d1_databases]]
binding = "ATRI_DB"
database_name = "atri_diary"
database_id = "YOUR_DATABASE_ID"

[triggers]
crons = ["59 15 * * *"]

# Custom domain (optional): configure in Cloudflare Dashboard
# Example: api.example.com
